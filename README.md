# Cyprus Real Estate - Property Selection PWA

Веб-приложение для брокеров недвижимости на Кипре. Позволяет создавать подборки объектов и отправлять клиентам для оценки в стиле Tinder.

## Демо

- **Сайт:** [Vercel URL]
- **Демо-аккаунт:** `broker@example.com` / `demo123`

## Возможности

### Для брокера
- Просмотр базы объектов из CSV
- Детальная информация по каждому объекту с ссылкой на источник
- Создание подборок для клиентов
- Генерация уникальной ссылки для каждой подборки
- Отслеживание реакций клиентов в реальном времени
- Dashboard со статистикой

### Для клиента
- Просмотр подборки по уникальной ссылке
- Swipe-интерфейс (лайк/дизлайк)
- Мобильная версия
- Возможность установки как PWA

## Технологии

- **Frontend:** Vanilla HTML/CSS/JS
- **Backend:** Supabase (PostgreSQL + Auth + REST API)
- **Data:** CSV файл с объектами
- **Hosting:** Vercel
- **PWA:** Service Worker + Web App Manifest

## Структура проекта

```
real_estate/
├── src/
│   ├── assets/
│   │   ├── css/
│   │   │   ├── common.css      # Общие стили
│   │   │   ├── broker.css      # Стили панели брокера
│   │   │   └── swipe.css       # Стили swipe-интерфейса
│   │   ├── js/
│   │   │   ├── data-sync.js    # Загрузка данных из CSV
│   │   │   ├── supabase-client.js  # Клиент Supabase
│   │   │   ├── swipe.js        # Логика свайпов
│   │   │   └── mock-data.js    # Моковые данные
│   │   └── icons/              # PWA иконки
│   ├── broker/
│   │   ├── login.html          # Страница входа
│   │   ├── dashboard.html      # Дашборд брокера
│   │   ├── properties.html     # Каталог объектов
│   │   └── selections.html     # Управление подборками
│   ├── client/
│   │   └── swipe.html          # Swipe-интерфейс для клиента
│   ├── index.html              # Главная страница
│   ├── manifest.json           # PWA манифест
│   ├── sw.js                   # Service Worker
│   └── base.csv                # База объектов
├── docs/                       # Документация
└── README.md
```

## Установка и запуск

### Локальная разработка

```bash
# Клонировать репозиторий
git clone https://github.com/KeonyRus/real_estate.git
cd real_estate

# Запустить локальный сервер (нужен для CORS)
python -m http.server 8080

# Открыть в браузере
http://localhost:8080/src/
```

### Настройка Supabase

1. Создать проект на [supabase.com](https://supabase.com)
2. Выполнить SQL схему (см. `docs/schema.sql`)
3. Создать пользователя в Authentication
4. Обновить ключи в `src/assets/js/supabase-client.js`

### Обновление данных

1. Скачать данные из Google Sheets как CSV
2. Сохранить как `src/base.csv`
3. В интерфейсе нажать "Load from CSV"

## База данных (Supabase)

### Таблицы

- **brokers** - брокеры (для будущего расширения)
- **selections** - подборки объектов
- **reactions** - реакции клиентов (лайк/дизлайк)

### Автоматические триггеры

- При добавлении реакции автоматически обновляется статистика подборки
- Статус подборки меняется на "completed" когда все объекты просмотрены

## PWA

Приложение можно установить на телефон:

### Android (Chrome)
1. Открыть сайт в Chrome
2. Нажать на три точки (меню)
3. Выбрать "Установить приложение" или "Добавить на главный экран"

### iOS (Safari)
1. Открыть сайт в Safari
2. Нажать кнопку "Поделиться" (квадрат со стрелкой)
3. Выбрать "На экран «Домой»"

### Desktop (Chrome/Edge)
1. Открыть сайт
2. В адресной строке справа появится иконка установки
3. Нажать и подтвердить установку

## Changelog

### v0.2.0 (2024-12-04)
- Исправлено дублирование ID объектов из одного проекта
- Добавлено модальное окно с детальной информацией по объекту
- Добавлены ссылки на оригинальные объявления
- Dashboard загружает реальные данные из Supabase
- Страница Selections показывает детали подборки с лайкнутыми объектами
- Исправлен демо-аккаунт на странице логина

### v0.1.0 (2024-12-03)
- Базовая версия с PWA
- Авторизация через Supabase Auth
- Загрузка данных из CSV
- Создание подборок
- Swipe-интерфейс

## Лицензия

MIT
