# TODO - Real Estate Service

> Актуальный список задач проекта

---

## Легенда

- [ ] Не начато
- [~] В работе
- [x] Завершено

---

## Выполнено (v0.2.0)

### Инфраструктура
- [x] Supabase проект создан
- [x] SQL схема выполнена (brokers, selections, reactions)
- [x] RLS политики настроены
- [x] Vercel деплой настроен
- [x] GitHub репозиторий создан

### PWA
- [x] manifest.json
- [x] Service Worker (sw.js)
- [x] Мета-теги во всех страницах
- [ ] Иконки 192x192 и 512x512

### Авторизация
- [x] Supabase Auth интеграция
- [x] Страница логина брокера
- [x] Защита страниц (редирект на логин)
- [x] Логаут

### Данные
- [x] Загрузка из CSV (вместо Google Sheets API)
- [x] Уникальные ID для каждого объекта (URL + ApartmentNo)
- [x] Сохранение в localStorage

### Broker Dashboard
- [x] Статистика из Supabase (реальные данные)
- [x] Последние подборки
- [x] Последняя активность

### Properties Page
- [x] Каталог объектов из CSV
- [x] Фильтры (поиск, локация, тип, цена)
- [x] Модальное окно с деталями объекта
- [x] Ссылка на оригинальное объявление
- [x] Создание подборки → Supabase
- [x] Генерация уникальной ссылки

### Selections Page
- [x] Загрузка подборок из Supabase
- [x] Фильтры по статусу
- [x] Детальный просмотр подборки
- [x] Лайкнутые/пропущенные объекты с инфой
- [x] Ссылки на оригинальные объявления
- [x] Копирование ссылки
- [x] Удаление подборки

### Client Swipe
- [x] Загрузка подборки по токену
- [x] Swipe интерфейс (touch + mouse)
- [x] Сохранение реакций в Supabase
- [x] Автообновление статистики (триггер)

---

## ЗАВТРА: Финальное демо (v0.3.0)

### Высокий приоритет

#### CRM базовая
- [ ] Таблица clients в Supabase
- [ ] Страница Clients в dashboard
- [ ] Привязка подборки к клиенту
- [ ] Имя/телефон/email клиента

#### Регистрация
- [ ] Страница регистрации брокера (signup.html)
- [ ] Регистрация клиента от брокера (добавить клиента)
- [ ] Инвайт-ссылка для клиента

#### Мобильное меню
- [ ] Бургер-меню для мобильной версии
- [ ] Адаптивный sidebar
- [ ] Тестирование на телефоне

#### Навигация
- [ ] Ссылка на лендинг из всех страниц
- [ ] Лендинг: кнопки "Для брокера" и "Для клиента"
- [ ] Редирект после логина на dashboard
- [ ] Breadcrumbs (опционально)

### Средний приоритет

#### UI улучшения
- [ ] PWA иконки (icon-192.png, icon-512.png)
- [ ] Логотип
- [ ] Уведомления вместо alert()
- [ ] Loading состояния

#### Функционал
- [ ] Редактирование подборки (добавить/удалить объекты)
- [ ] Повторная отправка ссылки
- [ ] Срок действия подборки

---

## Backlog (после демо)

### Уведомления
- [ ] Email при завершении просмотра
- [ ] Telegram бот

### Экспорт
- [ ] PDF экспорт подборки
- [ ] Excel/CSV экспорт

### Локализация
- [ ] i18n система
- [ ] Русский / English / Ελληνικά

### Аналитика
- [ ] Время просмотра каждого объекта
- [ ] Хитмапа интереса
- [ ] Графики в dashboard

### Flutter
- [ ] Мобильное приложение
- [ ] Push-уведомления

---

## Известные баги

| # | Баг | Приоритет |
|---|-----|-----------|
| 1 | Нет иконок PWA (404) | Средний |
| 2 | Мобильное меню не работает | Высокий |
| 3 | Хардкод имени в sidebar | Низкий |

---

## SQL для CRM (завтра)

```sql
-- Таблица клиентов
CREATE TABLE clients (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    broker_id UUID REFERENCES brokers(id),
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255),
    phone VARCHAR(50),
    notes TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Связь подборки с клиентом
ALTER TABLE selections ADD COLUMN client_id UUID REFERENCES clients(id);

-- RLS
ALTER TABLE clients ENABLE ROW LEVEL SECURITY;
CREATE POLICY "brokers_manage_clients" ON clients FOR ALL USING (true);
```

---

*Последнее обновление: 2024-12-04*
